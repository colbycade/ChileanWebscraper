---- Setup using Oracle
DROP TABLE DEFINITIONS;
DROP TABLE ENTRIES;
DROP TABLE USERS;

-- Entries Table
CREATE TABLE ENTRIES (
    ENTRY_ID   NUMBER
        GENERATED BY DEFAULT ON NULL AS IDENTITY
    PRIMARY KEY,
    ENTRY_NAME VARCHAR2(255) NOT NULL UNIQUE
);

-- Users Table
CREATE TABLE USERS (
    USER_ID  NUMBER
        GENERATED BY DEFAULT ON NULL AS IDENTITY
    PRIMARY KEY,
    USERNAME VARCHAR2(255) NOT NULL UNIQUE
);

-- Definitions Table
CREATE TABLE DEFINITIONS (
    DEFINITION_ID     CHAR(64) PRIMARY KEY, -- hash column as primary key insures no duplicate definitions (at least not by the same user)
    DEFINITION_TEXT   CLOB NOT NULL,
    EXAMPLE_TEXT      CLOB,
    SYNONYMS          CLOB,
    TIME_SINCE_UPLOAD VARCHAR2(50),
    TIME_IN_DAYS      NUMBER,
    VOTES             NUMBER,
    ENTRY_ID          NUMBER NOT NULL,
    USER_ID           NUMBER NOT NULL,
    FOREIGN KEY ( ENTRY_ID )
        REFERENCES ENTRIES ( ENTRY_ID ),
    FOREIGN KEY ( USER_ID )
        REFERENCES USERS ( USER_ID )
);